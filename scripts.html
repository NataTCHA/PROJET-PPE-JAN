<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Programmation et Projet encadré</title>
  <link href="styles.css" rel="stylesheet"/>
  
  <script src="script.js"></script>

<link rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css" />
</head>
<body>

                               
                           
<div class="container">

 <center><a href="http://www.univ-paris3.fr/"><img src="logo.png" width="20%" ></a></center>

    <div class="columns">
        <div class="column is-18">
            <div class="card">
                <div class="card-header">
                    <div class="card-header">

                    </div>
                </div>
                <div class="card-content">

                    <nav class="navbar is-light is-warning">

                        <div class="navbar-brand">
                           
                          <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
                                <span></span>
                                <span></span>
                                <span></span>
                            </a>
                        </div>
                        <div class="navbar-menu" id="navMenu">
                            <div class="navbar-end">
                                <a href="index.html" class="navbar-item" > Home </a>
                                   
                               
                                        <div class="navbar-item has-dropdown is-hoverable">
                                    <a class="navbar-link"> Extraction des URLs </a>
                                    <div class="navbar-dropdown">
                                    <a href="scripts.html" class="navbar-item"> Démarche </a>
                                        <a href="tableau_fr.html" class="navbar-item"> Tableau Français </a>
                                        <a href="tableau_all.html" class="navbar-item"> Tableau Allemand </a>
                                        <a href="tableau_eng.html" class="navbar-item"> Tableau Anglais </a>
                                      
                                    </div>
                                </div>
                                <div class="navbar-item has-dropdown is-hoverable">
                                        <a class="navbar-link"> Itrameur </a>
                                                    
                                  <div class="navbar-dropdown">
                                   <a href="demarche_itrameur.html" class="navbar-item"> Démarche </a>
                                        <a href="itrameurfr.html" class="navbar-item"> Corpus français </a>
                                        <a href="itrameurall.html" class="navbar-item"> Corpus allemand </a>
                                        <a href="itrameureng.html" class="navbar-item"> Corpus anglais </a>
                                        
                                        <hr class="navbar-divider">
                                      <a href="confrontation.html" class="navbar-item"> Confrontation résultats </a>
                                    </div>
                                    </div>
                             
                          
                                       <div class="navbar-item has-dropdown is-hoverable">
                                <a class="navbar-link"> Nuage de mots </a>
                                        <div class="navbar-dropdown">
                                        <a href="cloudfr.html" class="navbar-item"> Nuage français </a>
                                        <a href="cloudall.html" class="navbar-item"> Nuages allemand </a>
                                        <a href="cloudeng.html" class="navbar-item"> Nuages anglais </a>
                                        
                                        <hr class="navbar-divider">
                                      <a href="confrontation.html" class="navbar-item"> Confrontation résultats </a>
                                    </div>
                                    </div>
                                <a href="analyse.html" class="navbar-item"> Analyse </a>
                                <a href="about.html" class="navbar-item"> À propos de nous </a>
                       
                            </div>
                            <div class="navbar-end">
                            
                            </div>
                        </div>
                    </nav>
                </div>
                              <div id="script" data-tab-content>
                <p><div class="columns">
                  <div class="column">
                   
                  </div>
                  <div class="column is-two-thirds">
              
              <section class="hero is-primary">
                  <div class="hero-body">
                      <div class="container">
                      <h1 class="title">
                      Script
                      </h1>
                      <h2 class="subtitle">
                      L'avancée du script
                      </h2>
                      
                      </div>
                      </div>
                      </section>
                  
                       
                       <div class="box">
                        <img src="images/fox2.jpg" width="35%"/>  
                             <h2 class="title">Comment avons-nous fait ?</h2>
                         <p> Nous avons réalisé 3 scripts différents pour la constitution et l'analyse de nos corpus. C'est scripts ont été réalisés durant les séances de cours et au fil de nos exercices personnels.</p>
                         <p>Les 3 scripts que nous avons rédigés sont :
                            <div class="content">
                                <ul>
                                    <li> <b>scriptaspi.sh</b> : le script qui permet de créer les aspirations des pages qui nous intéressaient. Lors de l'éxécution de ce script, un autre script est exécuté en parallèle :<ul>
                                        <li> <b>concordance.sh</b> qui permet de créer les concordances du motif recherché lors de l'éxécution du script.</li></ul></li>
                                    <li><b>itrameurscript.sh</b> qui permet de créer, à partir d'un dossier de fichiers texte, un document XML qui concatène et organise chaque fichier.</li>    
                                </ul>
                            </div>
                            <br>
                            Ici, nous allons nous intéresser à la rédaction des deux premiers scripts. La création du script <b>itrameurscript.sh</b> est explicitée dans la partie <i>iTrameur</i>.
                         </p>
                         <br>
                         <br>
                          <p class="panel-heading">
                            Script aspiration
                          </p>
                            
                           
                         <br>
                         
                   
                    <br>
                                <p>Notre but premier a été de réaliser un script permettant de traiter nos URLs et d'obtenir des données sur celles-ci. Suite à ça nous avons voulu les représenter sous la forme d'un tableau html</p>
                                <br>
                                <p> Pour ce faire nous avons utilisé des commandes bash vu en cours.</p>
                                <br>
              <p> Tout d'abord nous avons téléchargé le <b>script traitement_url_base.sh</b> puis nous avons installé et utilisé <b>curl</b> afin de completer ce script.</p>
              <br>
          <p>La commande <b>curl</b> nous a permis de récuperer l'entête de la reponse du serveur et donc de savoir si l'url etait valide ou non ! si c'est 200 c'est ok sinon non :c </p>
           
          <img class="scripimage" src="images/Scripts/recupurl.png" width="70%"/>  
          <br>
          <p>Les entêtes qui nous ont interessées sont les suivantes :</p>
          <div class="content">
          <ul>
          <li><b>Le code HTTP</b></li>
          <li><b>Son encodage</b></li>
        </ul>
      </div>
          <br>
          <br>
  
      <br>

  <p>Lorsque le contenu de la page URL n'est pas de l'UTF-8 nous sommes embetées , en effet le traitement d'une page non UTF-8 peut poser des problemes pour la lecture des accents. Il nous paraît egalement fastidieux de traiter des pages n'ayant pas le même encodage. </p>
  <p> Pour eviter les problèmes nous le convertissons avec iconv pour n'avoir que de l'UTF-8.</p>
  <img class="scripimage" src="images/Scripts/enco1.png" width="70%"/>  

<br>


<br>
<p>Nos URLs vérifiées, nous voulons les stocker dans un tableau html afin d'avoir plus de visibilités et un recueil de données.</p>
<br>
 <img class="scriptimg" src="images/Scripts/tablurl1.png"/>  
 <p>fermeture du tableau html avec l'intégralité des donnéees</p>
<img class="scripimage" src="images/Scripts/tablurl1.png" width="100%"/>  
<br>

<p>Après avoir traité nos URLs , nous avons pu passer à l'étape suivante: récuperer le contenu textuel de nos pages.</p>
<p> La commande <b>Lynx</b> nous permet de recuperer le contenu textuel d'une page </p>
</p> <img class="scripimage" src="images/Scripts/lynx.png" width="70%"/> </p>
<br>

<br>
<p>Le but de notre projet est d'analyser un ou plusieurs mots, de ce fait nous avons commencé à nous soucier de ce mot. Nous avons ajouté un compteur permettant de compter le nombre d'occurence de nos mots dans les dumps</p>
<img class="scripimage" src="images/Scripts/count.png" width="70%"/>

<br>

                                <br>

                               
                
                                <p> Pour stocker les aspirations, dumps, contexte nous avons crée des dossiers permettant de stocker ces données et également necessaires au fonctionnement du script</p>
                                <img class="scripimage" src="images/Scripts/folder2.png" width="20%"/> 
                               <br>
                         
                               
                                <p>Le traitement de l'url ne sera pas le même en fonction de son entête. En effet si il renvoit le code 200 nous allons incrementer son dump à une variable. A contrario si l'URL renvoi un autre code nous utiliseront un dump vide</p>
                                <img class="scripimage" src="images/Scripts/entete.png" width="75%"/>  
                                <br>
                                <p>L' aspiration des pages et dump textuel se font donc sur les URL ayant le code 200, ces données sont directement envoyées aux dossiers crées au préalable</p>
                                <img class="scripimage" src="images/Scripts/aspi.png" width="70%"/>
                                <img class="scripimage" src="images/Scripts/dump.png" width="70%"/>
                                <br>
                                
                                <p>Pour ajouter le contexte du motif inséré par l'utilisateur , nous nous sommes documenté sur la manuel de 'grep' nous pouvons voir que les options A et B suivi d'un chiffre permettent de trouver ce qu'il y a après le mot et avant " after, before" le chiffre permet de mentionner la longueur de contexte que nous voulons en ligne.</p>
                                <img class="scripimage" src="images/Scripts/contexte.png" width="70%"/>
                                <br>
                                <p class="panel-heading">
                                    Script Concordance
                                  </p>
                                  <p>Suite à nos aspirations nous voulons créer un concordancier qui nous permettra de voir le contexte droit et gauche du motif.</p>
                                  <p>Pour ce faire, nous utilisons la commande bash ci-dessous qui nous permet de lancer notre futur script de concordancier</p>
                                  <img class="scripimage" src="images/Scripts/bash.png" width="100%"/>  
                                  <p>Nous pouvons voir un fait interessant dans la dernière partie de la commande : </p>
                                  <img class="scripimage" src="images/Scripts/folderconcor.png" width="110%"/> 
                                  <p> Les données du script concordances seront envoyées dans un fichier nommé <i>concordance</i>.
                                  Il est donc primordial de créer ce dossier.</p>
                                  <img class="scripimage" src="images/Scripts/folder.png" width="20%"/>  
                                  <p>Ce script contiendra deux arguments , le premier est le fichier dump : c'est sur ce ficher que ce produira l'analyse du contexte du motif, le deuxieme argument est le motif utilisé sur le scriptaspi.</p>
                                  <p>Pour éviter les problèmes nous mettons la condition d'avoir 2 arguments pour lancer le script.
                                  <img class="scripimage" src="images/Scripts/arg.png" width="50%"/>  
                                  <p>Nous voulons les resultats sous forme de tableaux. De ce fait dans le script concordance nous allons faire un tableau html.</p>
                                  <img class="scripimage" src="images/Scripts/tableauhtml.png" width="100%"/>  
                                 <p>Afin de mettre en forme le contexte droit et gauche nous utilisons la commande ci-dessous :</p>
                                  <img class="scripimage" src="images/Scripts/concordanceregex.png" width="110%"/>  
                                  <p>Avec la fonction grep nous captons le contexte gauche du motif à l'aide d'une expresion régulière <i>(\w+\W+){0,5}</i> de même pour le contexte droit.</p>
                                  <p>Suite à ca nous avons le contexte droit et gauche. Maintenant il faut l'ajouter à notre tableau de manière ordonnée</p>
                                  <p>Maintenant interessons nous à la deuxieme partie de la commande:</p>
                                  <img class="scripimage" src="images/Scripts/sed.png" width="110%"/> 
                                  <p>Nous mettons 3 élèment entre parenthèse.</p> 
                                  <p>Les parenthèses nous permettent de completer notre tableau comme nous le voulons. En effet le contenu de la première partie peut être extrait en l'appelant 1, le deuxieme élèment qui est le motif sera deux , enfin la parenthèse se trouvant à sa gauche sera 3</p>
                                  <p>Nous répartissons ces chiffres dans les colonnes du tableau en sachant que 1 est le contexte gauche , 2 le motif puis 3 le contexte droit.</p>
                                  <p>Une fois cela fait nous avons notre concordancier qui a cet aspect :</p>
                                  <img class="scripimage" src="images/Scripts/aspectconcor.png" width="40%"/> 
                                
                                <br>
                            
                         <br>
              </div>
                </div>
                      <div class="column">
                </div>
                </div></p>
              </div>
