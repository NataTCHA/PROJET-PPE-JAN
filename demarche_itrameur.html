<!doctype html>
<html lang="fr"><head>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <meta name="description" content="sulfur,business,company,agency,multipurpose,modern,bootstrap4">

   <meta name="author" content="themefisher.com">

   <title>PPE</title>

   <!-- bootstrap.min css -->
   <link rel="stylesheet" href="plugins/bulma/bulma.min.css">
   <!-- Icon Font Css -->
   <link rel="stylesheet" href="plugins/themify/css/themify-icons.css">
   <link rel="stylesheet" href="plugins/fontawesome/css/all.css">
   <!-- AOS css -->
   <link rel="stylesheet" href="plugins/animate-css/animate.css">
   <link rel="stylesheet" href="plugins/aos/aos.css">
   <link rel="stylesheet" href="plugins/magnific-popup/dist/magnific-popup.css">
   <link rel="stylesheet" href="plugins/modal-video/modal-video.min.css">
   <!-- Owl Carousel CSS -->
   <link rel="stylesheet" href="plugins/slick-carousel/slick/slick.css">
   <link rel="stylesheet" href="plugins/slick-carousel/slick/slick-theme.css">

   <!-- Main Stylesheet -->
   <link rel="stylesheet" href="css/style.css">
   <script src="highlight.js"></script>
   <script src="highlight.min.js"></script>
   <link rel="stylesheet" href="styles/default.min.css">
   <script>hljs.initHighlightingOnLoad();</script>

</head><body>

<!-- navigation -->
<header class="navigation">
	<nav id="navbar" class="navbar main-nav">
		<div class="container">
			<div class="navbar-brand ml-0">
				<a class="navbar-item" href="index.html">
					<h2 class="has-text-white" style="font-size:2rem">PPE</h2>
				</a>
				<button role="button" class="navbar-burger burger" data-hidden="true" data-target="navigation">
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
					<span aria-hidden="true"></span>
				</button>
			</div>

			<div class="navbar-menu mr-0" id="navigation">
				<ul class="navbar-end">					 
					<li class="navbar-item">
						<a class="navbar-link is-arrowless" href="index.html">Home</a>
					</li>
					
					<li class="navbar-item has-dropdown is-hoverable">
						<a class="navbar-link is-arrowless">Extraction des URLS</a>
						<div class="navbar-dropdown">
							<a href="scripts.html" class="navbar-item"> Démarche </a>
                      <a href="tableau_fr.html" class="navbar-item"> Tableau Français </a>
                     <a href="tableau_all.html" class="navbar-item"> Tableau Allemand </a>
                     <a href="tableau_eng.html" class="navbar-item"> Tableau Anglais </a>
						</div>
					</li>
					
               <li class="navbar-item has-dropdown is-hoverable">
                  <a class="navbar-link is-arrowless">iTrameur</a>
                  <div class="navbar-dropdown">
                     <a href="demarche_itrameur.html" class="navbar-item"> Démarche </a>
                     <a href="itrameurfr.html" class="navbar-item"> Analyse français </a>
                     <a href="itrameurall.html" class="navbar-item"> Analyse allemand </a>
                     <a href="itrameureng.html" class="navbar-item"> Analyse anglais </a>
                  </div>
               </li>

               <li class="navbar-item has-dropdown is-hoverable">
                  <a class="navbar-link is-arrowless">Nuage de mots</a>
                  <div class="navbar-dropdown">
                     <a href="cloudfr.html" class="navbar-item"> Nuage français </a>
                     <a href="cloudall.html" class="navbar-item"> Nuages allemand </a>
                     <a href="cloudeng.html" class="navbar-item"> Nuages anglais </a>
                  </div>
               </li>

					<li class="navbar-item">
						<a class="navbar-link is-arrowless" href="analyse.html">Conclusion</a>
					</li>
					
					<li class="navbar-item">
						<a class="navbar-link is-arrowless" href="about.html">À propos de nous</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
</header>
<!-- nav part end -->

<section class="page-title bg-1">
   <div class="container">
      <div class="columns">
         <div class="column is-12">
            <div class="has-text-centered">
               <!-- <p>News details</p> -->
               <h1 class="text-capitalize mb-4 text-lg">Constitution des corpus iTrameur</h1>
            </div>
         </div>
      </div>
   </div>
</section>

<!--Titre de section-->
<section class="section blog-wrap">
   <div class="container">
      <div class="columns is-desktop">
   <div class="column is-12">
      <div class="single-blog-item">
         <div class="has-text-centered">
            <span class="text-color text-sm letter-spacing is-uppercase mr-3">Ou comment créer un corpus à partir de mille et un fichier</span>
         </div>
         <h2 class="mt-1 mb-4 has-text-centered"><a href="demarche_itrameur.html">Script et création des corpus :</a></h2>
         <div class="blog-item-meta has-text-centered mb-5">
            <span class="is-uppercase text-sm mr-3 letter-spacing">par Juliette M.</span>
            <span class="is-uppercase text-sm letter-spacing"><i class="ti-time mr-1"></i>Janvier 2023</span>
         </div>

         <!--Contenu de la page-->
        <div class="box">
         <p><i>Si vous souhaitez avoir plus de détails sur certaines étapes, n'hésitez pas à consulter notre <a href="Organisation/journal-de-bord.md" target="_blank>"><b>journal de bord</b></a> (cliquez c'est cadeau !). Celui-ci est aussi disponible sur notre Git dans le dossier <a href="https://github.com/NataTCHA/PROJET-PPE-JAN/tree/main/Organisation" target="_blank>"><b>Organisation</b></a>.</i></p><br>
           <p>Après avoir réalisé nos aspirations, nous pouvons créer nos corpus finaux, ceux utilisés pour notre analyse iTrameur.
           </p>
           <br>
           <p>Pour ce faire, nous avons créé un nouveau script qui, à partir de l'arborescence de dossiers générée avec <a href="script/scriptaspi.sh" target="_blank"><b>scriptaspi.sh</b></a>, 
         vient concaténer les fichiers dumps texte dans un fichier texte avec une arborescence XML.</p>
         <br>
         <p>Le script que nous avons rédigé est le suivant :</p>
         <br>
           <pre style=" height: 500px; width: 900px;display: block; margin-left: auto; margin-right: auto;"><code class="script Bash" >
#!/usr/bin/env bash
# Cela lui permet de récupérer les fichiers dans les bons dossiers.
# Il se lancera donc comme ça :
# $ ./script/itrameurscript.sh

if [[ $# -ne 2 ]]
then
	echo "Deux arguments attendus: &lt;dossier&gt; &lt;langue&gt;"  # si on a pas deux arguments on sort car deux arguments sont attendus.
	exit
fi

#On attribue des noms de variables aux arguments
folder=$1 # dumps-text OU contextes
basename=$2 # en, fr, ru, pl, it, jp, etc... # le basename correspnd à la langue qu'on étudie

#On commence à créer la structure XML dans le fichier de sortie avec une valeur de balise lang égale à basename.
echo "&lt;lang=\"$basename\"&gt;" &gt; "./itrameur/$folder-$basename.txt" 


for filepath in $(ls $folder/$basename-*.txt) #on va itérer avec la commande ls, on va rechercher tous les fichiers txt ayant dans leur nom la valeur de basename
do
	# filepath == dumps-texts/fr-1.txt
	# 	==&gt; pagename = fr-1
	pagename=$(basename -s .txt $filepath)
	
    
	#On complète la page XML :
	echo "&lt;page=\"$pagename\"&gt;" &gt;&gt; "./itrameur/$folder-$basename.txt"
	echo "&lt;text&gt;" &gt;&gt; "./itrameur/$folder-$basename.txt"
	
	# On récupère les dumps/contextes
	# et on écrit à l'intérieur de la balise text
	
	content=$(cat $filepath)
	# ordre important : & en premier
	# sinon : &lt; =&gt; &lt; =&gt; &amp;lt;
	
	# On vient nettoyer le corpus de texte des éléments qui pourraient être présents et fausser l'arborescence XML
	content=$(echo "$content" | sed 's/&/\&amp;/g')
	content=$(echo "$content" | sed 's/&lt;/\&lt;/g')
	content=$(echo "$content" | sed 's/&gt;/\&gt;/g')

	#On affiche le contenu dans le fichier de sortie
	echo "$content" &gt;&gt; "./itrameur/$folder-$basename.txt"

	# On insère pour chaque page les balises fermantes correspondantes
	echo "&lt;/text&gt;" &gt;&gt; "./itrameur/$folder-$basename.txt"
	echo "&lt;/page&gt; §" &gt;&gt; "./itrameur/$folder-$basename.txt"
done

# On clôture la structure XML
echo "&lt;/lang&gt;" &gt;&gt; "./itrameur/$folder-$basename.txt"
</code></pre><br>
   <p>On le lance en mettant en argument le nom du dossier dans lequel se trouvent les fichiers à concaténer et le nom des fichiers textes (qui correspond à la langue avec le numéro d'URL si l'on a qu'un seul mot). Pour l'anglais et l'allemand, 
      étant donné que nous avons plusieurs dossiers de dumps différents, nous avons lancé le script autant de fois que nécessaire.
      <br>À la fin, nous obtenons donc un ensemble de dossiers (1 par mot) contenants un fichier texte avec les aspirations concaténées et organisées au format XML comme nous pouvons le voir ci-dessous avec cette photo des dossiers pour l'anglais :
   </p>
   <br>
   <img class="scripimage" src="images/Anglais/arborescenceitrameur.png" width="70%">

        </div>
      </div>
   </div>
   </div>
   </div>
   </section>
<!-- 
   Essential Scripts
   =====================================-->

   <!-- Main jQuery -->
   <script src="plugins/jquery/jquery.js"></script>
   <script src="js/contact.js"></script>
   <!--  Magnific Popup-->
   <script src="plugins/magnific-popup/dist/jquery.magnific-popup.min.js"></script>
   <!-- Slick Slider -->
   <script src="plugins/slick-carousel/slick/slick.min.js"></script>
   <!-- Counterup -->
   <script src="plugins/counterup/jquery.waypoints.min.js"></script>
   <script src="plugins/counterup/jquery.counterup.min.js"></script>
   <script src="plugins/shuffle/shuffle.min.js"></script>
   <script src="plugins/aos/aos.js"></script>
   <script src="plugins/animate-css/wow.min.js"></script>
   <script src="plugins/modal-video/jquery-modal-video.min.js"></script>
  
   <script src="js/script.js"></script>
</body></html>
